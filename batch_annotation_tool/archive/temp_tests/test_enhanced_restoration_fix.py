#!/usr/bin/env python3
"""
å¢å¼ºæ ‡æ³¨æ¢å¤ä¿®å¤éªŒè¯æµ‹è¯•
è§£å†³é—®é¢˜ï¼šè®¾ç½®äº†25å·å­”å¢å¼ºæ ‡æ³¨ä¸ºé˜³æ€§--èšé›†å‹ï¼Œå¯¼èˆªåå›æ¥æ—¶ç”Ÿé•¿çº§åˆ«å’Œæ¨¡å¼æœªæ¢å¤
"""

import sys
import os
from pathlib import Path

# æ·»åŠ srcç›®å½•åˆ°Pythonè·¯å¾„
current_file = Path(__file__).resolve()
project_root = current_file.parent
src_dir = project_root / "src"

if str(src_dir) not in sys.path:
    sys.path.insert(0, str(src_dir))

def test_enhanced_restoration():
    """æµ‹è¯•å¢å¼ºæ ‡æ³¨æ¢å¤ä¿®å¤"""
    print("ğŸ”§ å¢å¼ºæ ‡æ³¨æ¢å¤ä¿®å¤éªŒè¯")
    print("=" * 60)
    
    try:
        import tkinter as tk
        from ui.panoramic_annotation_gui import PanoramicAnnotationGUI
        
        # åˆ›å»ºGUIå®ä¾‹
        root = tk.Tk()
        app = PanoramicAnnotationGUI(root)
        
        print("âœ… GUIåˆå§‹åŒ–æˆåŠŸ")
        print("\nğŸ¯ é—®é¢˜æè¿°:")
        print("- è®¾ç½®25å·å­”å¢å¼ºæ ‡æ³¨ä¸º'é˜³æ€§--èšé›†å‹'")
        print("- ç‚¹å‡»'ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª'åˆ‡æ¢åˆ°26å·å­”") 
        print("- å†åˆ‡æ¢å›25å·å­”")
        print("- é—®é¢˜ï¼šç”Ÿé•¿çº§åˆ«æœªè®¾ç½®ä¸”ç”Ÿé•¿æ¨¡å¼æœªè®¾ç½®")
        
        print("\nğŸ”§ å·²å®æ–½çš„ä¿®å¤:")
        print("âœ“ ä¿®å¤ set_feature_combination æ–¹æ³•æ­£ç¡®å¤„ç†æšä¸¾å€¼")
        print("âœ“ æ·»åŠ è¯¦ç»†çš„æ¢å¤è°ƒè¯•è¾“å‡º")
        print("âœ“ æ”¹è¿›ç‰¹å¾ç»„åˆæ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–")
        print("âœ“ å¢å¼ºé”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶")
        
        print("\nğŸ“ æµ‹è¯•æ­¥éª¤:")
        print("1. åŠ è½½åŒ…å«åˆ‡ç‰‡æ•°æ®çš„å…¨æ™¯å›¾")
        print("2. å¯¼èˆªåˆ°25å·å­”")
        print("3. åœ¨å¢å¼ºæ ‡æ³¨é¢æ¿ä¸­è®¾ç½®ï¼š")
        print("   - ç”Ÿé•¿çº§åˆ«ï¼šé˜³æ€§")
        print("   - ç”Ÿé•¿æ¨¡å¼ï¼šèšé›†å‹")
        print("4. ç‚¹å‡»'ä¿å­˜å¹¶ä¸‹ä¸€ä¸ª'")
        print("5. å¯¼èˆªå›25å·å­”")
        print("6. éªŒè¯å¢å¼ºæ ‡æ³¨é¢æ¿æ˜¯å¦æ­£ç¡®æ¢å¤çŠ¶æ€")
        
        print("\nğŸ” æœŸæœ›ä¿®å¤æ•ˆæœ:")
        print("âœ… å½“å‰ç”Ÿé•¿çº§åˆ«é€‰æ‹©: é˜³æ€§")
        print("âœ… å½“å‰ç”Ÿé•¿æ¨¡å¼é€‰æ‹©: èšé›†å‹")
        print("âœ… æ§åˆ¶å°è¾“å‡ºæ˜¾ç¤ºæ•°æ®æ­£ç¡®æ¢å¤")
        print("âœ… ä¸å†å›é€€åˆ°é»˜è®¤çŠ¶æ€")
        
        print("\nğŸ“‹ å…³é”®ä¿®å¤ç‚¹:")
        print("â€¢ set_feature_combinationæ–¹æ³•ç°åœ¨æ­£ç¡®æå–æšä¸¾çš„.valueå±æ€§")
        print("â€¢ å¢å¼ºäº†ç‰¹å¾ç»„åˆæ•°æ®çš„è°ƒè¯•è¾“å‡º")
        print("â€¢ æ”¹è¿›äº†é”™è¯¯å¤„ç†å’Œå¼‚å¸¸æ¢å¤æœºåˆ¶")
        print("â€¢ ç¡®ä¿UIå˜é‡æ¥æ”¶æ­£ç¡®çš„å­—ç¬¦ä¸²å€¼è€Œéæšä¸¾å¯¹è±¡")
        
        print("\nğŸš€ å¯åŠ¨ä¿®å¤åçš„GUIè¿›è¡Œæµ‹è¯•...")
        
        # å¯åŠ¨GUIä¸»å¾ªç¯
        root.mainloop()
        
        return True
        
    except Exception as e:
        print(f"âŒ æµ‹è¯•å¤±è´¥: {e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == '__main__':
    print("ğŸ”§ å¢å¼ºæ ‡æ³¨æ¢å¤ä¿®å¤éªŒè¯")
    print("ç›®æ ‡ï¼šä¿®å¤é˜³æ€§--èšé›†å‹æ ‡æ³¨å¯¼èˆªåçš„æ¢å¤é—®é¢˜")
    print()
    
    success = test_enhanced_restoration()
    
    if success:
        print("\nâœ… ä¿®å¤éªŒè¯å¯åŠ¨æˆåŠŸ")
        print("è¯·æŒ‰ç…§ä¸Šè¿°æµ‹è¯•æ­¥éª¤éªŒè¯ä¿®å¤æ•ˆæœ")
    else:
        print("\nâŒ ä¿®å¤éªŒè¯å¯åŠ¨å¤±è´¥")
    
    print("\nğŸ“‹ éªŒè¯æ¸…å•:")
    print("[ ] è®¾ç½®25å·å­”ä¸ºé˜³æ€§--èšé›†å‹")
    print("[ ] ä¿å­˜å¹¶å¯¼èˆªåˆ°26å·å­”")
    print("[ ] å¯¼èˆªå›25å·å­”")
    print("[ ] éªŒè¯ç”Ÿé•¿çº§åˆ«æ˜¾ç¤ºä¸º'é˜³æ€§'")
    print("[ ] éªŒè¯ç”Ÿé•¿æ¨¡å¼æ˜¾ç¤ºä¸º'èšé›†å‹'")
    print("[ ] æ§åˆ¶å°è¾“å‡ºæ˜¾ç¤ºæ•°æ®æ­£ç¡®æ¢å¤")
    
    sys.exit(0 if success else 1)