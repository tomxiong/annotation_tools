# 起始点调整功能使用说明

## 功能概述

起始点调整功能用于校正多台仪器采集全景图像时可能存在的摄像机定位偏差。由于不同仪器的摄像机可能未完全对齐测试板，导致第一个孔的位置存在左右上下的偏移，此功能提供了一个简单有效的调整方式。

## 功能特点

- **简化设计**: 替代了之前复杂的hole_config_panel，提供最简单有效的设置
- **直观操作**: 通过简单的X、Y坐标输入调整起始位置
- **实时预览**: 显示当前起始位置，便于对比调整
- **即时生效**: 调整后立即更新显示，无需重启应用

## 使用方法

### 1. 启动功能
- 在工具栏中点击"起始点调整"按钮
- 如果尚未加载全景图数据，系统会提示先加载数据

### 2. 调整参数
1. **查看当前位置**: 对话框上方显示当前的X、Y坐标值
2. **输入新位置**: 在同一行的输入框中输入新的X、Y坐标
3. **应用更改**: 点击"应用"按钮更新位置
4. **重置参数**: 点击"重置"按钮恢复到原始值

### 界面特点
- **居中显示**: 对话框在屏幕中央打开，便于操作
- **紧凑布局**: X和Y坐标在同一行，界面简洁
- **合适尺寸**: 窗口大小适中，所有控件完全可见

### 3. 参数说明
- **X坐标**: 第一个孔的水平位置（像素为单位）
- **Y坐标**: 第一个孔的垂直位置（像素为单位）
- **应用范围**: 调整会影响整个孔位网格的定位

## 使用场景

### 典型问题
```
问题: 不同仪器拍摄的全景图中，第一个孔的位置不一致
原因: 摄像机未完全对齐测试板，存在定位偏差
影响: 导致孔位检测和标注不准确
```

### 解决方案
```
1. 加载有问题的全景图数据
2. 观察第一个孔的实际位置
3. 打开"起始点调整"对话框
4. 根据观察调整X、Y坐标
5. 应用设置并验证效果
```

## 技术实现

### 核心组件
- **GUI按钮**: 工具栏新增"起始点调整"按钮
- **调整对话框**: 简洁的参数输入界面
- **HoleManager**: 底层位置参数管理
- **实时更新**: 参数更改后立即刷新显示

### 代码结构
```python
# 主要方法
show_start_position_dialog()     # 显示调整对话框
update_positioning_params()      # 更新底层参数
load_current_slice()            # 刷新当前显示
```

## 测试验证

### 功能测试
运行以下命令验证功能：
```bash
python test_start_position.py
```

### 演示测试
运行以下命令查看界面效果：
```bash
python demo_start_position.py
```

## 注意事项

1. **参数范围**: X、Y坐标应为正整数，通常在全景图尺寸范围内
2. **数据依赖**: 需要先加载全景图数据才能进行调整
3. **全局影响**: 调整会影响所有孔位的相对位置计算
4. **保存设置**: 当前版本的调整仅在会话期间有效，重新加载数据会重置

## 与旧版本的差异

| 特性 | 旧版本 (hole_config_panel) | 新版本 (起始点调整) |
|------|----------------------------|-------------------|
| 界面复杂度 | 复杂的面板界面 | 简洁的弹窗对话框 |
| 参数数量 | 多种配置参数 | 仅X、Y坐标 |
| 使用难度 | 需要理解多个概念 | 直观的坐标调整 |
| 功能覆盖 | 全面但复杂 | 精准解决核心问题 |

## 总结

新的起始点调整功能专注于解决仪器定位偏差这一核心问题，通过简化的界面和直观的操作，提供了一个实用而高效的解决方案。这个功能成功替代了之前复杂的配置面板，体现了"简单有效"的设计理念。
