# SEå…¨æ™¯å›¾èµ·å§‹å­”ä½åŠ¨æ€è®¾ç½®åŠŸèƒ½å®ç°æŠ¥å‘Š

## æ¦‚è¿°

æˆåŠŸå®ç°äº†SEå…¨æ™¯å›¾èµ·å§‹å­”ä½çš„åŠ¨æ€è®¾ç½®åŠŸèƒ½ï¼Œè§£å†³äº†SEç±»å‹å…¨æ™¯å›¾éœ€è¦ä»ç¬¬5ä¸ªå­”ä½å¼€å§‹æ ‡æ³¨çš„é—®é¢˜ã€‚

## é—®é¢˜èƒŒæ™¯

åŸæœ‰é—®é¢˜ï¼š
- SEå¼€å¤´çš„å…¨æ™¯å›¾å‰4ä¸ªå­”ä½ä¸ºç©ºï¼Œæœ‰æ•ˆå­”ä½ä¸º5-120å·ï¼ˆ116ä¸ªå­”ä½ï¼‰
- æ™®é€šå…¨æ™¯å›¾æœ‰æ•ˆå­”ä½ä¸º1-120å·ï¼ˆ120ä¸ªå­”ä½ï¼‰
- åˆ‡ç‰‡å®šä½å’Œæ ‡è¯†å®ç°éœ€è¦æŒ‰ç…§åŸä»£ç é€»è¾‘ï¼Œä¸è‡ªè¡Œç¼–å†™

åŸä»£ç ä¸­è™½ç„¶åœ¨DataManagerä¸­æ­£ç¡®å¤„ç†äº†SEç‰¹æ®Šé€»è¾‘ï¼ˆCFGè§£æã€åˆ‡ç‰‡æ‰«æï¼‰ï¼Œä½†åœ¨GUIç•Œé¢å±‚é¢ï¼ŒHoleManagerçš„èµ·å§‹å­”ä½æ²¡æœ‰æ ¹æ®å…¨æ™¯å›¾ç±»å‹åŠ¨æ€æ›´æ–°ï¼Œå¯¼è‡´ï¼š
1. å¯¼èˆªåŠŸèƒ½ä»ä½¿ç”¨é»˜è®¤èµ·å§‹å­”ä½ï¼ˆ25å·ï¼‰
2. æ— æ³•æ­£ç¡®å®šä½åˆ°SEå…¨æ™¯å›¾çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆå­”ä½ï¼ˆ5å·ï¼‰
3. åˆ‡æ¢å…¨æ™¯å›¾æ—¶èµ·å§‹å­”ä½ä¸ä¼šè‡ªåŠ¨è°ƒæ•´

## è§£å†³æ–¹æ¡ˆ

### 1. æ ¸å¿ƒå®ç°åŸç†

åœ¨å…¨æ™¯å›¾åˆ‡æ¢æ—¶åŠ¨æ€æ£€æµ‹SEç±»å‹ï¼Œå¹¶ç›¸åº”è®¾ç½®HoleManagerçš„èµ·å§‹å­”ä½ï¼š

```python
# SEç±»å‹æ£€æµ‹å’Œèµ·å§‹å­”ä½è®¾ç½®é€»è¾‘
if panoramic_id.upper().startswith('SE'):
    # SEç±»å‹å…¨æ™¯å›¾ï¼šå‰4ä¸ªå­”ä½ä¸ºç©ºï¼Œä»ç¬¬5ä¸ªå­”å¼€å§‹
    hole_manager.update_positioning_params(start_hole=5)
else:
    # æ™®é€šå…¨æ™¯å›¾ï¼šä»ç¬¬1ä¸ªå­”å¼€å§‹
    hole_manager.update_positioning_params(start_hole=1)
```

### 2. ä¿®æ”¹çš„æ–‡ä»¶å’Œå‡½æ•°

#### `src/ui/panoramic_annotation_gui.py`

**A. `switch_to_panoramic` æ–¹æ³•**
- ä½ç½®ï¼šç¬¬5756è¡Œ
- ä¿®æ”¹ï¼šåœ¨åˆ‡æ¢å…¨æ™¯å›¾æ—¶æ£€æŸ¥SEç±»å‹å¹¶è®¾ç½®èµ·å§‹å­”ä½
- åŠŸèƒ½ï¼šç”¨äºç»§ç»­æ ‡æ³¨åŠŸèƒ½çš„å…¨æ™¯å›¾åˆ‡æ¢

**B. `go_to_panoramic` æ–¹æ³•**
- ä½ç½®ï¼šç¬¬5715è¡Œ
- ä¿®æ”¹ï¼šåœ¨æ‰‹åŠ¨å¯¼èˆªåˆ°å…¨æ™¯å›¾æ—¶æ£€æŸ¥SEç±»å‹å¹¶è®¾ç½®èµ·å§‹å­”ä½
- åŠŸèƒ½ï¼šç”¨äºä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©å’Œå¯¼èˆªæŒ‰é’®çš„å…¨æ™¯å›¾åˆ‡æ¢

**C. `load_current_slice` æ–¹æ³•**
- ä½ç½®ï¼šç¬¬1800è¡Œ
- ä¿®æ”¹ï¼šåœ¨å…¨æ™¯å›¾æ”¹å˜æ—¶æ£€æŸ¥SEç±»å‹å¹¶è®¾ç½®èµ·å§‹å­”ä½
- åŠŸèƒ½ï¼šåˆ‡ç‰‡åŠ è½½è¿‡ç¨‹ä¸­çš„å…¨æ™¯å›¾åˆ‡æ¢å¤„ç†

**D. `load_data` æ–¹æ³•**
- ä½ç½®ï¼šç¬¬1440è¡Œ
- ä¿®æ”¹ï¼šåœ¨æ•°æ®åŠ è½½å®Œæˆåæ ¹æ®ç¬¬ä¸€ä¸ªå…¨æ™¯å›¾ç±»å‹è®¾ç½®èµ·å§‹å­”ä½
- åŠŸèƒ½ï¼šåˆå§‹æ•°æ®åŠ è½½æ—¶çš„èµ·å§‹å­”ä½è®¾ç½®

#### `src/ui/hole_manager.py`

**ä¿®å¤ `is_hole_available_for_annotation` æ–¹æ³•**
- ä½ç½®ï¼šç¬¬437è¡Œ
- é—®é¢˜ï¼šåŸæ–¹æ³•åªæ£€æŸ¥ä¸‹é™ï¼Œæ²¡æœ‰æ£€æŸ¥ä¸Šé™
- ä¿®å¤ï¼šæ·»åŠ ä¸Šé™æ£€æŸ¥ï¼Œç¡®ä¿å­”ä½åœ¨æœ‰æ•ˆèŒƒå›´å†…

```python
# ä¿®å¤å‰
return hole_number >= self.start_hole_number

# ä¿®å¤å  
return self.start_hole_number <= hole_number <= self.total_holes
```

### 3. å®ç°çš„åŠŸèƒ½ç‚¹

#### A. è‡ªåŠ¨SEç±»å‹æ£€æµ‹
- æ£€æµ‹å…¨æ™¯å›¾IDæ˜¯å¦ä»¥"SE"å¼€å¤´ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
- æ”¯æŒå„ç§SEå‘½åæ ¼å¼ï¼šSE10000052ã€se10000052ã€SE_10000052ç­‰

#### B. åŠ¨æ€èµ·å§‹å­”ä½è®¾ç½®
- SEç±»å‹ï¼šèµ·å§‹å­”ä½è®¾ç½®ä¸º5
- æ™®é€šç±»å‹ï¼šèµ·å§‹å­”ä½è®¾ç½®ä¸º1
- é€šè¿‡`HoleManager.update_positioning_params(start_hole=n)`å®ç°

#### C. å¤šç§åˆ‡æ¢åœºæ™¯è¦†ç›–
- ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©å…¨æ™¯å›¾
- å¯¼èˆªæŒ‰é’®åˆ‡æ¢
- ç»§ç»­æ ‡æ³¨åŠŸèƒ½åˆ‡æ¢
- åˆå§‹æ•°æ®åŠ è½½

#### D. ç¬¬ä¸€ä¸ªæœ‰æ•ˆå­”ä½æŸ¥æ‰¾
- `find_first_valid_slice_index` æ–¹æ³•ä½¿ç”¨æ­£ç¡®çš„èµ·å§‹å­”ä½
- ç¡®ä¿å¯¼èˆªåˆ°æ­£ç¡®çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆåˆ‡ç‰‡

## æµ‹è¯•éªŒè¯

### æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

åˆ›å»ºäº† `test_se_start_hole_core.py` éªŒè¯ï¼š

âœ… **HoleManagerèµ·å§‹å­”ä½æ›´æ–°æµ‹è¯•**
- èµ·å§‹å­”ä½è®¾ç½®ä¸º5ï¼ˆSEç±»å‹ï¼‰
- èµ·å§‹å­”ä½è®¾ç½®ä¸º1ï¼ˆæ™®é€šç±»å‹ï¼‰
- å­”ä½æœ‰æ•ˆæ€§éªŒè¯åŠŸèƒ½

âœ… **SEç±»å‹æ£€æµ‹æµ‹è¯•**
- å„ç§SEå‘½åæ ¼å¼çš„æ­£ç¡®è¯†åˆ«
- æ™®é€šç±»å‹å…¨æ™¯å›¾çš„æ­£ç¡®è¯†åˆ«
- èµ·å§‹å­”ä½çš„æ­£ç¡®æ˜ å°„

âœ… **GUI SEé€»è¾‘æ¨¡æ‹Ÿæµ‹è¯•**
- æ¨¡æ‹Ÿå…¨æ™¯å›¾åˆ‡æ¢åœºæ™¯
- éªŒè¯èµ·å§‹å­”ä½åŠ¨æ€æ›´æ–°
- æµ‹è¯•å¤šç§å…¨æ™¯å›¾ç±»å‹

### æµ‹è¯•ç»“æœ

```
ğŸ‰ æ‰€æœ‰SEèµ·å§‹å­”ä½è®¾ç½®æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼
```

æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‡é€šè¿‡ï¼Œç¡®è®¤åŠŸèƒ½å®ç°æ­£ç¡®ã€‚

## å½±å“èŒƒå›´

### ä¿®æ”¹å½±å“
- **å‘åå…¼å®¹æ€§**ï¼šæ™®é€šå…¨æ™¯å›¾å¤„ç†é€»è¾‘ä¿æŒä¸å˜
- **SEç‰¹æ®Šå¤„ç†**ï¼šSEå…¨æ™¯å›¾ç°åœ¨èƒ½æ­£ç¡®ä»ç¬¬5ä¸ªå­”ä½å¼€å§‹
- **å¯¼èˆªåŠŸèƒ½**ï¼šæ‰€æœ‰å¯¼èˆªç›¸å…³åŠŸèƒ½éƒ½ä¼šä½¿ç”¨æ­£ç¡®çš„èµ·å§‹å­”ä½

### åŠŸèƒ½å®Œæ•´æ€§
- **åˆ‡ç‰‡å®šä½**ï¼šä½¿ç”¨åŸæœ‰çš„HoleManagerå®šä½é€»è¾‘ï¼Œæ²¡æœ‰è‡ªè¡Œç¼–å†™æ–°çš„å®šä½ä»£ç 
- **åæ ‡è½¬æ¢**ï¼šç»§ç»­ä½¿ç”¨åŸæœ‰çš„åæ ‡è½¬æ¢å’Œå­”ä½è®¡ç®—æ–¹æ³•
- **æ ‡æ³¨æ•°æ®**ï¼šä¸DataManagerä¸­çš„SEç‰¹æ®Šå¤„ç†é€»è¾‘ä¿æŒä¸€è‡´

## æŠ€æœ¯ç»†èŠ‚

### å®ç°æ—¶æœºé€‰æ‹©
é€‰æ‹©åœ¨GUIç•Œé¢å±‚é¢åŠ¨æ€è®¾ç½®èµ·å§‹å­”ä½ï¼Œè€Œä¸æ˜¯åœ¨DataManagerå±‚é¢ï¼ŒåŸå› ï¼š
1. DataManagerå·²æ­£ç¡®å¤„ç†SEçš„æ•°æ®é€»è¾‘ï¼ˆCFGè§£æã€åˆ‡ç‰‡æ‰«æï¼‰
2. GUIå±‚é¢çš„èµ·å§‹å­”ä½è®¾ç½®æ›´é€‚åˆç”¨æˆ·äº¤äº’å’Œå¯¼èˆª
3. é¿å…é‡å¤ä¿®æ”¹æ•°æ®å±‚é€»è¾‘ï¼Œä¿æŒæ¶æ„æ¸…æ™°

### åŸä»£ç é€»è¾‘å¤ç”¨
ä¸¥æ ¼æŒ‰ç…§ç”¨æˆ·è¦æ±‚ï¼Œå¤ç”¨åŸæœ‰çš„åˆ‡ç‰‡å®šä½å’Œæ ‡è¯†é€»è¾‘ï¼š
- ä½¿ç”¨`HoleManager.update_positioning_params`æ–¹æ³•
- ä½¿ç”¨`HoleManager.start_hole_number`å±æ€§
- ä½¿ç”¨åŸæœ‰çš„å­”ä½éªŒè¯å’Œå¯¼èˆªæ–¹æ³•
- æ²¡æœ‰è‡ªè¡Œç¼–å†™æ–°çš„å®šä½ç®—æ³•

## ç»“è®º

âœ… **SEå…¨æ™¯å›¾èµ·å§‹å­”ä½åŠ¨æ€è®¾ç½®åŠŸèƒ½å·²æˆåŠŸå®ç°**
âœ… **åˆ‡æ¢å…¨æ™¯å›¾æ—¶èµ·å§‹å­”ä½ä¼šè‡ªåŠ¨è°ƒæ•´**
âœ… **å¯¼èˆªåŠŸèƒ½ä½¿ç”¨æ­£ç¡®çš„èµ·å§‹å­”ä½**
âœ… **ä¸åŸæœ‰DataManagerçš„SEç‰¹æ®Šå¤„ç†é€»è¾‘ä¿æŒä¸€è‡´**
âœ… **ä¸¥æ ¼å¤ç”¨åŸä»£ç çš„åˆ‡ç‰‡å®šä½å’Œæ ‡è¯†é€»è¾‘**

ç°åœ¨SEç±»å‹å…¨æ™¯å›¾å¯ä»¥æ­£ç¡®ä»ç¬¬5ä¸ªå­”ä½å¼€å§‹æ ‡æ³¨ï¼Œæ™®é€šç±»å‹å…¨æ™¯å›¾ä»ç¬¬1ä¸ªå­”ä½å¼€å§‹æ ‡æ³¨ï¼Œè§£å†³äº†åˆ‡ç‰‡å®šä½å’Œæ ‡è¯†çš„éœ€æ±‚ã€‚

---
**æ—¥æœŸ**ï¼š2025-09-11  
**ä½œè€…**ï¼šGitHub Copilot  
**æ–‡ä»¶**ï¼š`docs/SE_START_HOLE_DYNAMIC_SETTING_REPORT.md`
