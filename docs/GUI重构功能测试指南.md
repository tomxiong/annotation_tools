# GUI重构后功能测试指南

## 测试目的
验证经过三步拆分后的GUI是否保持所有原有功能，确保重构过程中没有遗漏或破坏任何功能。

## 测试环境准备

### 1. 启动重构后的GUI
```bash
cd D:\dev\annotation_tools
python run_gui.py
```

### 2. 测试数据准备
- 准备一些测试用的全景图文件(.bmp)
- 准备相应的配置文件(.cfg)
- 确保有可写入的目录用于保存测试

## 功能测试清单

### 🎯 第一组：基础界面功能测试

#### 1.1 窗口基础功能 ✅
- [ ] GUI窗口能正常启动
- [ ] 窗口标题显示正确："全景图像标注工具 - 重构版 v1.2.0.0"
- [ ] 窗口大小和布局正常（1600x900）
- [ ] 窗口可以正常缩放
- [ ] 状态栏显示正确的版本信息

#### 1.2 主界面布局 ✅
- [ ] 顶部工具栏显示正常
- [ ] 左侧全景图显示区域存在
- [ ] 右侧切片显示区域存在
- [ ] 控制面板布局正确
- [ ] 底部状态栏显示正常

### 🎯 第二组：数据操作功能测试（第三步拆分的重点）

#### 2.1 目录选择功能 ✅
- [ ] 点击"浏览..."按钮能打开目录选择对话框
- [ ] 选择目录后路径显示在文本框中
- [ ] 选择的目录路径能正确保存
- [ ] 状态栏显示目录选择结果

#### 2.2 数据加载功能 ✅
- [ ] "加载数据"按钮响应正常
- [ ] 加载过程有适当的状态提示
- [ ] 加载完成后界面状态更新
- [ ] 错误情况有合适的错误提示

#### 2.3 标注保存功能 ✅
- [ ] "保存标注"按钮响应正常
- [ ] 保存对话框能正常打开
- [ ] 能选择保存路径和文件名
- [ ] 保存操作完成有确认提示
- [ ] 错误情况有合适的错误提示

#### 2.4 导入导出功能 ✅
- [ ] 导入模型建议功能正常
- [ ] 导出训练数据功能正常
- [ ] 各种文件格式支持正常
- [ ] 导入导出过程有进度提示

### 🎯 第三组：事件处理功能测试（第二步拆分的重点）

#### 3.1 键盘快捷键 ✅
- [ ] 按键1-3响应正常
- [ ] 方向键（上下左右）响应正常
- [ ] Ctrl+S保存快捷键工作正常
- [ ] 快捷键操作有相应的日志记录

#### 3.2 窗口事件 ✅
- [ ] 窗口大小调整事件正常处理
- [ ] 窗口焦点变化正常处理
- [ ] 窗口关闭操作正常

#### 3.3 鼠标交互 ✅
- [ ] 鼠标点击事件响应正常
- [ ] 鼠标拖拽操作正常
- [ ] 鼠标滚轮操作正常（如果有）

### 🎯 第四组：UI组件功能测试（第一步拆分的重点）

#### 4.1 工具栏组件 ✅
- [ ] 目录输入框功能正常
- [ ] 浏览按钮功能正常
- [ ] 加载按钮功能正常
- [ ] 保存按钮功能正常
- [ ] 按钮状态切换正常

#### 4.2 显示组件 ✅
- [ ] 全景图显示区域功能正常
- [ ] 切片显示区域功能正常
- [ ] 图像缩放和平移正常
- [ ] 图像质量显示正常

#### 4.3 控制组件 ✅
- [ ] 微生物类型选择下拉框正常
- [ ] 导航按钮（上一张/下一张）正常
- [ ] 位置显示标签更新正常
- [ ] 各种输入控件响应正常

### 🎯 第五组：集成功能测试

#### 5.1 模块间通信 ✅
- [ ] UI组件调用数据操作正常
- [ ] 事件处理触发相应功能正常
- [ ] 数据操作结果反映到UI正常
- [ ] 错误处理在各模块间传递正常

#### 5.2 日志系统 ✅
- [ ] 各模块日志记录正常
- [ ] 日志级别分类正确
- [ ] 日志文件写入正常
- [ ] 调试信息显示正常

#### 5.3 状态同步 ✅
- [ ] 界面状态与数据状态同步
- [ ] 操作进度显示同步
- [ ] 错误状态正确传播
- [ ] 成功状态正确显示

## 详细测试步骤

### 测试步骤1：基础启动测试
1. 双击或命令行启动GUI
2. 观察窗口是否正常显示
3. 检查所有界面元素是否完整
4. 记录任何异常或缺失

### 测试步骤2：目录操作测试
1. 点击"浏览..."按钮
2. 选择包含全景图的测试目录
3. 确认路径正确显示
4. 点击"加载数据"按钮
5. 观察加载过程和结果

### 测试步骤3：快捷键测试
1. 确保窗口有焦点
2. 依次按下1、2、3键
3. 按下方向键（上下左右）
4. 按下Ctrl+S
5. 检查日志中是否有相应记录

### 测试步骤4：保存功能测试
1. 点击"保存标注"按钮
2. 在保存对话框中选择位置
3. 输入文件名并保存
4. 确认操作完成提示

### 测试步骤5：界面交互测试
1. 尝试调整窗口大小
2. 在图像区域点击鼠标
3. 尝试拖拽操作
4. 测试各种控件的响应

## 问题记录模板

### 发现问题时记录以下信息：
```
问题描述：[详细描述问题现象]
重现步骤：[列出重现问题的具体步骤]
预期结果：[描述应该出现的正确结果]
实际结果：[描述实际观察到的结果]
错误信息：[如有错误提示，请记录完整信息]
影响程度：[高/中/低]
所属模块：[UI组件/事件处理/数据操作/其他]
```

## 测试完成检查项

### ✅ 必须通过的核心功能
- [ ] GUI能正常启动和关闭
- [ ] 基本的文件操作功能正常
- [ ] 键盘快捷键响应正常
- [ ] 界面布局和显示正常
- [ ] 错误处理机制正常

### ⚠️ 重点关注的重构风险点
- [ ] 模块间调用是否正常
- [ ] 数据传递是否完整
- [ ] 事件绑定是否有效
- [ ] UI更新是否及时
- [ ] 日志记录是否准确

### 📋 性能和稳定性检查
- [ ] 启动速度是否正常
- [ ] 内存使用是否合理
- [ ] 长时间运行稳定性
- [ ] 异常恢复能力

## 测试结果报告

### 完成测试后，请填写：

#### 总体评估
- 测试通过率：___% 
- 发现问题数量：___个
- 严重问题数量：___个
- 重构质量评价：优秀/良好/一般/需改进

#### 具体问题列表
[在此记录发现的所有问题]

#### 建议和改进点
[记录改进建议]

---

**开始测试时间**：_____________  
**完成测试时间**：_____________  
**测试人员**：_________________  
**测试环境**：Windows + Python + GUI重构版本
